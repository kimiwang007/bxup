<?xml version="1.0" encoding="UTF-8"?>    
 <!DOCTYPE sqlMap    
 PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"    
 "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="ShowSpace">
	<typeAlias alias="ShowForm" type="com.bxup.bxup.model.Show" />
	<typeAlias alias="PhotoForm" type="com.bxup.bxup.model.Photo" />
	<typeAlias alias="ShowPhotoRelForm" type="com.bxup.bxup.model.ShowPhotoRel" />
	<typeAlias alias="UserForm" type="com.bxup.bxup.model.User" />
	
<!-- 	<resultMap id="ShowResult" class="ShowForm">   
    <result property="id" column="id"/>   
    <result property="keyName" column="keyName"/>   
    <result property="lock" column="lockId" select="getLockById"/>   
    </resultMap>
	
	<resultMap id="UserResult" class="UserForm">   
    <result property="id" column="id"/>   
    <result property="keyName" column="keyName"/>   
    <result property="lock" column="lockId" select="getLockById"/>   
    </resultMap>
    
    <resultMap id="ShowPhotoRelResult" class="ShowPhotoRelForm">   
    <result property="id" column="id"/>   
    <result property="keyName" column="keyName"/>   
    <result property="lock" column="lockId" select="getLockById"/>   
    </resultMap> -->
    
    <resultMap id="PhotoResult" class="PhotoForm">   
    <result property="id" column="id"/>   
    <result property="create_user_id" column="create_user_id"/>   
    <result property="file_name" column="file_name" select="getphotonameById"/>   
    </resultMap>
	
	
	
	
	<!-- select -->
	<select id="selectAllShow" resultClass="ShowForm">    
             select * from 
             t_show where delete_status = 0 
	</select>
	
	<select id="selectshowbyid" resultClass="ShowForm">    
             select * from 
             t_show where delete_status = 0 and user_id=#user_id# ORDER BY id DESC
	</select>
	
	<select id="getphotonameById" resultClass="PhotoForm">    
             select file_name from 
             t_photo where id=#show_id#
	</select>
	
	
	
	
	<!-- insert -->
	<insert id="insertShowForm" parameterClass="ShowForm">
			insert into
			t_show(user_id,description,create_time,like_count,delete_status,width,height,show_type)
			values(#user_id#,#description#,#create_time#,#like_count#,#delete_status#,#width#,#height#,#show_type#)
<!-- 			    <selectKey resultClass="long" type="post" keyProperty="id" >     
                         select LAST_INSERT_ID() as value     
                </selectKey>    --> 
			
	</insert>
	<!-- delete -->

</sqlMap> 